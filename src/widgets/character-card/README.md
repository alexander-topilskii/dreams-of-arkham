## Name
CharacterCard

## Purpose
CharacterCard показывает текущий статус исследователя (портрет, описание, здоровье, рассудок, действия и активные эффекты) и размещается в нижней центральной панели (`middle-bottom`) интерфейса игры Dreams of Arkham.

## Visual Overview
```
┌───────────────────────────────┬───────────────────────┐
│┌───────┐┌────────────────────┐│ Активные эффекты       │
││ IMG   ││ Агнес Бэйкер       ││ ┌────────────────────┐ │
││       ││ Таинственная офиц. ││ │ • Защитный оберег  │ │
│└───────┘│Бывшая официантка…  ││ │ • Элдрический рез.│ │
│         └────────────────────┘│ └────────────────────┘ │
│ Здоровье 6/7  Рассудок 5/8    │ Пусто → «Нет эффектов» │
│ Действия: 3                   │ (курсивом)             │
└───────────────────────────────┴───────────────────────┘
```
- Фон: полупрозрачный градиент от #202430 к #181a22 с мягкой подсветкой.
- Портрет: 128×160 px, закруглённые углы 12 px, тонкая рамка.
- Статистика расположена сеткой 3×1 с карточками на полупрозрачном фоне.
- Полосы здоровья и рассудка с градиентными заполнителями и плавной анимацией ширины.
- Активные эффекты занимают правую колонку; список оформлен карточками, пустое состояние показывает курсивную подпись.
- В мобильной ширине (<480 px) компонент переходит к вертикальному расположению портрета и одинарной колонке статов.

## Behavior
- При инициализации рисует разметку и подключает собственные стили (вставляет `<style>` один раз).
- Обновление состояния через `setState` пересчитывает подписи, полосы здоровья/рассудка и список эффектов.
- Отсутствие портрета включает декоративный плейсхолдер-фон.
- Отсутствие титула или описания скрывает соответствующие блоки.
- Если список эффектов пуст, отображается строка «Нет активных эффектов» вместо списка.
- Метод `destroy` очищает контейнер и удаляет созданный узел, если компонент владеет корнем.

## API (Props / Inputs / Outputs)
| Name | Type | Default | Description |
|------|------|---------|-------------|
| `root` | `HTMLElement \| null \| undefined` | — | Контейнер, в котором рендерится компонент. При отсутствии создаётся обёртка `<div>`. |
| `state` | `CharacterCardState` | — | Начальные данные персонажа (имя, статы, эффекты). |
| `options.emptyEffectsLabel` | `string` | `'Нет активных эффектов'` | Текст для пустого списка эффектов. |
| `setState(partial)` | `(Partial<CharacterCardState>) => void` | — | Обновляет состояние и перерисовывает данные. |
| `destroy()` | `() => void` | — | Очищает DOM-структуру компонента. |

## States and Examples
- **Normal**: Портрет, имя, титул, описание, здоровье 6/7, рассудок 5/8, действия 3, два эффекта (каждый с названием и описанием).
- **Empty effects**: `effects: []` — список скрывается, появляется курсивная подпись `Нет активных эффектов` (кастомизируется опцией).
- **No portrait**: `portraitUrl` отсутствует — изображение остаётся пустым с штриховкой-плейсхолдером.
- **Reduced stats**: Передача значений `current` > `max` приводит к обрезке до `max`, <0 — до 0, что ограничивает ширину полоски.

## Lifecycle
- **Initialize**: вызвать конструктор, передав контейнер и начальное состояние. Компонент вставит стили в `<head>` (однократно) и построит DOM.
- **Update**: вызывать `setState` при изменении здоровья, рассудка, действий или эффектов. Внутри обновляются текстовые значения, полосы прогресса и список эффектов.
- **Destroy**: при удалении панели вызвать `destroy()`, чтобы убрать разметку и освободить контейнер. Дополнительных слушателей событий не создаётся.
- **Dependencies**: чистый TypeScript/DOM, без сторонних библиотек. Стили подключаются динамически из компонента.

## Integration Example
```ts
import characterSource from "../data/character.json";
import { CharacterCard, type CharacterCardState } from "../widgets/character-card/character-card";

const characterState = characterSource as CharacterCardState;
const slot = document.getElementById("character-panel");

const characterCard = new CharacterCard(slot, {
    ...characterState,
    portraitUrl: characterState.portrait,
});

// Позднее можно обновить действия после хода
characterCard.setState({ actionPoints: 1 });
```
