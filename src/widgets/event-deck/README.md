# Event deck

Виджет отображает стопку событий, открытые карты и сброс. Он не мутирует состояние: все данные передаются в виде снапшота, а пользовательские действия транслируются наружу через колбэки намерений. Конфигурация поступает из JSON-файла с описанием карт и границами добора за одно событие.

## Использование
- Импортируйте `EventDeck` и конфигурацию: `import deckSource from "../../data/event-deck.json";`
- Создайте экземпляр: `const deck = new EventDeck(container, deckSource as EventDeckConfig)`.
- Передайте колбэки, чтобы обрабатывать намерения пользователя: `deck.setIntentHandlers({ onTrigger, onReveal, onDiscard });`. Виджет вызывает их при клике по кнопкам/карточкам, а внешняя логика (например, `GameEngineStore`) диспатчит соответствующие команды и публикует новый снапшот через адаптер.
- Обновляйте UI с помощью `deck.applySnapshot(snapshot)`, где `snapshot` содержит массивы `drawPile`, `revealed`, `discardPile` и опциональный статус.

## Поведение
- Колода отображается как стопка карт рубашкой вверх; счётчик показывает количество оставшихся карт.
- Панель управления содержит кнопку «Вызвать судьбу» (случайный добор в диапазоне `draw.min`/`draw.max`) и поле «Открыть N карт», значение которого нормализуется внутри виджета.
- Открытые события выводятся вертикальным списком с прокруткой. Клик по карточке вызывает `onDiscard(cardId)` и ожидает, что движок опубликует обновлённый список через снапшот.
- Секция сброса показывает собранные события, автоматически синхронизируясь с последним снапшотом.

## Завершение
Для удаления виджета достаточно убрать его корневой элемент из DOM — дополнительных ресурсов он не удерживает. Чтобы сбросить колбэки, вызовите `deck.setIntentHandlers({})` перед демонтажем.
