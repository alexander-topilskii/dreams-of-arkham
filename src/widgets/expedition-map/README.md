# Expedition Map

Карта экспедиции — виджет для отображения сети территорий в виде шестиугольников. Каждая территория имеет оборотную и лицевую стороны, связи с другими территориями и поддерживает интерактивность.

## Как выглядит и ведёт себя
- Территории отображаются шестиугольными плитками, изначально повернутыми задней стороной.
- По клику плитка переворачивается: показываются имя лицевой стороны, описание и фон с иллюстрацией.
- Связи визуализируются линиями: односторонние с стрелкой, двусторонние со стрелками на обоих концах.
- Территории можно сразу перетаскивать, линии соединений обновляются в процессе перемещения.
- Карта поддерживает масштабирование колесиком мыши и через панель управления в правом нижнем углу; при зуме увеличиваются именно плитки, текст остаётся читаемым и переходит на новые строки.
- Вся область карты перемещается перетаскиванием фона.

## Использование
```ts
import mapData from '@/data/map.json';
import { ExpeditionMap } from '@/widgets/expedition-map/expedition-map';

const mapRoot = document.getElementById('map-panel');
const map = new ExpeditionMap(mapRoot, mapData);
```

### API
- `new ExpeditionMap(root, config)` — инициализирует карту в контейнере `root`.
- `config.territories` — массив территорий с полями `id`, `back`, `front`, `connections`. Поле `position` необязательно: если его не указать, карта равномерно распределит плитки по видимой области виджета.
- `config.characters` — необязательный массив начальных размещений персонажей. Каждый элемент задаёт `territoryId` и конфигурацию жетона (`id`, имя, подпись, цвета).
- `map.addTerritory(territory)` — добавляет новую территорию и перерисовывает связи.
- `map.placeCharacter(character, territoryId)` — добавляет или перемещает жетон персонажа к указанной территории. Если цвет не задан, карта подберёт его автоматически.
- `map.removeCharacter(characterId)` — снимает жетон персонажа с карты.
- `map.getTerritoryIds()` — возвращает массив текущих идентификаторов территорий (полезно для отладки).

## Когда уничтожать
Виджет создаёт DOM-структуру внутри переданного контейнера и не регистрирует глобальных слушателей. Для уничтожения достаточно удалить контейнер или очистить его содержимое.
